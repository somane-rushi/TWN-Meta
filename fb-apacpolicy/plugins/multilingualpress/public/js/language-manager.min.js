;var MultilingualPress=window.MultilingualPress||{};var MultilingualPressRedirectorSettings=window.MultilingualPressRedirectorSettings||{};MultilingualPress.RedirectorSettings=MultilingualPressRedirectorSettings;delete window.MultilingualPressRedirectorSettings;languageManager=window.languageManager||{};(function(t,e,a,n){'use strict';e.LanguageManager=function(){var r,a,e,i=/\[(\d+)\]/i,u=/-(\d+)-/i,l=/\[-(\d+)\]/i,o=function(){var e=t('<p class="mlp-new-language"><button class="button">'+n.newLanguageButtonLabel+'</button></p>');e.insertAfter(a);return e},s=function(){var i=t('<td data-label="Deletor"><button class="mlp-language-deletor button dashicons dashicons-trash" data-action="delete"><span class="screen-reader-text">'+n.languageDeleteButtonLabel+'</span></button></td>'),e=t('<th scope="col" data-label="Deletor">'+n.languageDeleteTableHeadLabel+'</th>');a.find('thead > tr th:last-of-type').after(e.clone());a.find('tfoot > tr th:last-of-type').after(e.clone());a.find('tbody > tr td:last-of-type').after(i);return t('.mlp-language-deletor')},c=function(){var n=e.clone();n.hide().insertAfter(e);e=n;e.find('input').each(function(e,n){t(n).val('');t(n).removeAttr('checked')})},d=function(){e&&e.hide()},f=function(){e&&e.show()},g=function(){var n=-1,a=e.find('input');if(!a){return n};var t=(new RegExp(i)).exec(a[0].getAttribute('name'));return Array.isArray(t)?++t[1]:n},p=function(t,e){t.each(function(t,n){var a=n.getAttribute('name'),r=n.getAttribute('id');n.setAttribute('name',a.replace(i,'['+e+']'));n.setAttribute('id',r.replace(u,'-'+e+'-'))})},v=function(t,e){t.each(function(t,n){var a=n.getAttribute('name');n.setAttribute('name',a.replace(e?l:i,e?'[$1]':'[-$1]'))})},h=function(){f();var t=g();if(-1===t){return};c();p(e.find('input'),t)},m=function(e){if(!e){return};var i=e.parents('tr');if(!i){return};var a=e.attr('data-action')==='undo',u=a?function(e,n){t(n).removeAttr('readonly').css('opacity',1)}:function(e,n){t(n).attr('readonly','readonly').css('opacity',.2)},l=a?n.languageDeleteButtonLabel:n.languageUndoDeleteButtonLabel,r=i.find('input');r.each(u);e.attr('data-action',a?'delete':'undo').find('span').text(l);i.find('button').toggleClass('dashicons-undo dashicons-trash');v(r,a)},b=function(){window.addEventListener('load',function(){a.find('.ui-autocomplete-input').on('autocompleteselect',function(e,n){var a='item' in n&&n.item,i='language' in a&&a.language,r=t(this);if(!i){return};setTimeout(function(){y(r.parents('tr'),i)},0)})})},y=function(t,e){t.find('.native-name').val(e.nativeName);t.find('.english-name').val(e.englishName);t.find('.iso-639-1').val(e.iso639Code1);t.find('.iso-639-2').val(e.iso639Code2);t.find('.iso-639-3').val(e.iso639Code3);t.find('.iso-639-3').val(e.iso639Code3);t.find('.locale').val(e.locale);t.find('.http-code').val(e.httpCode);e.isRtl?t.find('.is-rtl').attr('checked','checked'):t.find('.is-rtl').removeAttr('checked')};this.init=function(){if(r){return this};a=t('#mlp-language-manager-table');if(!a){return this};e=a.find('tbody tr:last-of-type');d(e);var i=s();i.live('click',function(e){e.preventDefault();e.stopPropagation();m(t(this))});var n=o(a);n.click(function(t){t.preventDefault();t.stopPropagation();h()});b();r=!0;return this}}}(jQuery,MultilingualPress,ajaxurl,languageManager));(function(t,e,n){'use strict';e.LanguageSearch=function(e){var o=!1,u,i,r,a,s,l={};var c=function(a,i){t.ajax({url:n,method:'POST',dataType:'json',data:{action:e.data('action'),search:a}}).done(function(e){if(e.success&&e.data&&t.isArray(e.data)){l[a]=e.data;return i(e.data)};return[]}).fail(function(){return i([])})};this.init=function(){if(!o){u=e.closest('td');i=t(e.data('connected'));r=u.find('.current-selection');a=u.find('.remove-selection');s=e.data('none');e.autocomplete({minLength:2,select:function(e,n){r&&r.text(n.item.label);i&&i.val(n.item.value);a&&a.show();t(this).val('');return!1},source:function(t,e){if(t.term in l){e(l[t.term]);return};c(t.term,e)}});a.click(function(t){t.preventDefault();r.text(s);i.val('');e.val('');a.hide()});o=!0};return this}}}(jQuery,MultilingualPress,ajaxurl));(function(t,e,n){'use strict';t(function(){var a,i;if(n==='multilingualpress_page_language-manager'){i=new e.LanguageManager();i.init();a=new e.LanguageSearch(t('#mlp-language-manager-table').find('td:first-child').find('input'));a.init()}})}(jQuery,MultilingualPress,adminpage));